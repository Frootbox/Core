{% set v = view.getViewHelper('\\Frootbox\\Admin\\Viewhelper\\GeneralPurpose') %}

<tr id="{{ data.item.getId() }}" class="{% if data.highlight  and data.highlight == data.item.getId() %}highlighted{% endif %}">
    <td class="level-{{ data.level }}">
        {% if not data.item.isAutogenerated() %}
            <a href="{{ v.getUri('NavigationBars', 'ajaxModalItemDetails', { itemId: data.item.getId() } ) }}" data-modal>
                {{ data.item.getTitle() | default('kein Titel')  }}
            </a>
        {% else %}
            <span style="color: #CCC;">{{ data.item.getTitle() }} (automatisch generiert)</span>
        {% endif %}
    </td>
    <td class="text-right">

        {% if not data.item.isAutogenerated() %}
            <a class="ajax" href="{{ v.getUri('Assets', 'ajaxSwitchVisibility', { assetId: data.item.getId(), repository: data.item.getModelClass() } ) }}"><i data-asset="{{ data.item.getId() }}" class="fa fa-lightbulb visibility {{ data.item.getVisibilityString() }} icon"></i></a>
            <a data-modal href="{{ v.getUri('NavigationBars', 'ajaxModalComposeItem', { parentId: data.item.getId(), navigationId: data.navigation.getId(), language: data.language }) }}" data-title="Navigations-Punkt erstellen"><i class="fa fa-plus-circle icon"></i></a>
            <a class="ajax" href="{{ v.getUri('NavigationBars', 'ajaxItemDelete', { itemId: data.item.getId() } ) }}" data-confirm="Soll dieser Navigationspunkt wirklich gelÃ¶scht werden?"><i class="fa fa-times icon"></i></a>
        {% endif %}

    </td>
</tr>

{% for child in data.item.getItems() %}
    {{ v.injectPartial('\\Frootbox\\Admin\\Controller\\NavigationBars\\Partials\\ListNavigationItemsRow\\Partial', {
        item: child,
        language: data.language,
        navigation: data.navigation,
        level: (data.level + 1)
    }) | raw }}
{% endfor %}
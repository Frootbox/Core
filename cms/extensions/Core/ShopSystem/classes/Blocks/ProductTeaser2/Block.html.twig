{# config

title: Produkt-Teaser
category: ShopSystem
subtitle: 
variables:
    withHeadline:
        label: mit Überschrift
        type: bool
    imageHeight:
        label: Bildhöhe
        type: int
        default: 350
    imageWidth:
        label: Bildhöhe
        type: int
        default: 350
extends: Core/ShopSystem/ProductTeaser

/config #}


{% set i = view.getViewhelper('Delegator', { object: block }) %}
{% set p = view.getViewhelper('Partials', { basePath: viewFolder }) %}

{% set icons = view.getViewhelper('Ext/HerrUndFrauPixelExt/Icons/Icons', { createDummyOnFail: true  }) %}

{% set variables = block.getVariables() %}

{% if variables.withHeadline %}
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h2 class="first main-title" data-editable data-uid="{{ block.getUid('title') }}">Überschrift</h2>
                <div data-editable data-uid="{{ block.getUid('text') }}"></div>

            </div>
        </div>
    </div>
{% endif %}

<div class="teasers">

    {% if products | length == 0 %}
        <div class="editors-note">Es wurden noch kein Produkt verknüpft.</div>
    {% endif %}

    {% for product in products %}
        <div class="teaser">

            <div class="container">
                <div class="row">
                    <div class="col-12">

                        <div class="product" data-href>

                            <div class="row">
                                <div class="col-md-4">
                                    <div class="back-layer"></div>
                                    <picture class="fluid" data-editable data-uid="{{ product.getUid('image')}}">
                                        <img width="{{ variables.imageWidth }}" height="{{ variables.imageHeight }}" src="{{ i.getDummyImage({ width: variables.imageWidth, height: variables.imageHeight }) }}" alt="" />
                                    </picture>
                                </div>
                                <div class="col-md-8">

                                    <div class="content-wrapper">

                                        <h3><a href="{{ product.getUri() }}">{{ product.getTitle() }}</a></h3>

                                        <div class="row">
                                            <div class="col-6 col-md-4 price order-md-2">
                                                {{ product.getPriceGross() | number_format(2, ',', '.') }} €
                                            </div>
                                            <div class="col-md-8 order-md-1">

                                                <div data-editable data-nowidgets data-uid="{{ product.getUid('teaser') }}"></div>

                                                {% if variables.withPackagingSize and product.getPackagingSize() > 0 %}
                                                    Inhalt {{ product.getPackagingSize() | replace({ '.': ',' }) }} {{ t.translate('Unit' ~product.getPackagingUnit()) }}
                                                {% endif %}

                                                <a class="mt-4 btn btn-primary" href="{{ product.getUri() }}">Produktdetails</a>

                                            </div>

                                        </div>

                                    </div>

                                </div>
                            </div>


                        </div>

                    </div>
                </div>
            </div>

        </div>
    {% endfor %}

</div>
